var myChart = dc.rowChart("#myChart");

//fetch data 
function loadData(fn){
	setTimeout(fn, 50000);
};

function drawChart() {
d3.json("http://localhost:3000/getResults", function (data) {

	
	//pass data to crossfilter	
	var ndx = crossfilter(data);				
	console.log(data);
	
		//create topic dimension
	var resultDim = ndx.dimension(function(d){ return d.TopicID});
	var resultGroup = resultDim.group();
	
	//set up topic chart	
  myChart
  	.height(300)
  	.dimension(resultDim)
  	.group(resultGroup); 	  
  		
  dc.renderAll();

});
};

loadData(drawChart());